# SCHEMA DATABASE CHI TI·∫æT - H·ªÜ TH·ªêNG QU·∫¢N L√ù GARAGE √î T√î

## üìã M·ª§C L·ª§C
1. [Vehicle Management Module](#vehicle-management-module)
2. [Parts & Inventory Management Module](#parts--inventory-management-module)
3. [Service Management Module](#service-management-module)
4. [Service Order Module](#service-order-module)
5. [Financial Management Module](#financial-management-module)
6. [Supplier & Purchase Management Module](#supplier--purchase-management-module)
7. [Relationships Diagram](#relationships-diagram)

---

## üöó VEHICLE MANAGEMENT MODULE

### **1. VehicleBrands Table**
Qu·∫£n l√Ω th√¥ng tin c√°c h√£ng xe.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID h√£ng xe | 1 |
| BrandName | VARCHAR(50) | T√™n h√£ng xe | Mercedes-Benz |
| BrandCode | VARCHAR(20) UNIQUE | M√£ h√£ng | MB |
| Country | VARCHAR(100) | Qu·ªëc gia | Germany |
| Description | TEXT | M√¥ t·∫£ | Luxury German manufacturer |
| IsActive | BOOLEAN | C√≤n ho·∫°t ƒë·ªông | TRUE |
| CreatedAt | DATETIME | Ng√†y t·∫°o | 2024-01-01 |
| UpdatedAt | DATETIME | Ng√†y c·∫≠p nh·∫≠t | 2024-01-01 |

**Indexes:**
- UNIQUE: BrandCode
- INDEX: BrandName, IsActive

---

### **2. VehicleModels Table**
Qu·∫£n l√Ω c√°c model xe c·ªßa t·ª´ng h√£ng.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID model | 1 |
| BrandId | INT (FK) | H√£ng xe | 1 (Mercedes-Benz) |
| ModelName | VARCHAR(100) | T√™n model | C-Class |
| ModelCode | VARCHAR(20) UNIQUE | M√£ model | W205 |
| Generation | VARCHAR(20) | Th·∫ø h·ªá | W205 |
| StartYear | VARCHAR(10) | NƒÉm b·∫Øt ƒë·∫ßu | 2014 |
| EndYear | VARCHAR(10) | NƒÉm k·∫øt th√∫c | 2021 |
| VehicleType | VARCHAR(50) | Lo·∫°i xe | Sedan |
| Segment | VARCHAR(50) | Ph√¢n kh√∫c | Luxury |
| Description | TEXT | M√¥ t·∫£ | Compact executive car |
| IsActive | BOOLEAN | C√≤n s·∫£n xu·∫•t | TRUE |

**Relationships:**
- BrandId ‚Üí VehicleBrands(Id)

**Indexes:**
- UNIQUE: ModelCode
- INDEX: BrandId, ModelName, IsActive

---

### **3. EngineSpecifications Table**
Th√¥ng s·ªë ƒë·ªông c∆° chi ti·∫øt cho m·ªói model.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID ƒë·ªông c∆° | 1 |
| ModelId | INT (FK) | Model xe | 1 (C-Class W205) |
| EngineCode | VARCHAR(50) UNIQUE | M√£ ƒë·ªông c∆° | M274 |
| EngineName | VARCHAR(100) | T√™n ƒë·ªông c∆° | 2.0L Turbo |
| Displacement | VARCHAR(20) | Dung t√≠ch | 1991cc |
| FuelType | VARCHAR(20) | Lo·∫°i nhi√™n li·ªáu | Gasoline |
| Aspiration | VARCHAR(20) | H·ªá th·ªëng n·∫°p | Turbo |
| CylinderLayout | VARCHAR(20) | B·ªë tr√≠ xi lanh | I4 |
| CylinderCount | INT | S·ªë xi lanh | 4 |
| StartYear | VARCHAR(20) | NƒÉm b·∫Øt ƒë·∫ßu | 2014 |
| EndYear | VARCHAR(20) | NƒÉm k·∫øt th√∫c | 2021 |

**Relationships:**
- ModelId ‚Üí VehicleModels(Id)

**Indexes:**
- UNIQUE: EngineCode
- INDEX: ModelId, EngineCode

---

### **4. Vehicles Table**
Th√¥ng tin chi ti·∫øt t·ª´ng xe.

#### **Th√¥ng tin c∆° b·∫£n:**
| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID xe | 1 |
| LicensePlate | VARCHAR(20) UNIQUE | Bi·ªÉn s·ªë | 30A-12345 |
| Brand | VARCHAR(100) | H√£ng xe | Mercedes-Benz |
| Model | VARCHAR(100) | Model | C-Class W205 |
| Year | VARCHAR(20) | NƒÉm s·∫£n xu·∫•t | 2020 |
| Color | VARCHAR(50) | M√†u s·∫Øc | ƒêen |
| VIN | VARCHAR(17) UNIQUE | S·ªë khung | WDD2050461A123456 |
| EngineNumber | VARCHAR(50) | S·ªë ƒë·ªông c∆° | M274920123456 |
| CustomerId | INT (FK) | Ch·ªß xe | 1 |

#### **Ph√¢n lo·∫°i xe:**
| Column | Type | Description | Values |
|--------|------|-------------|--------|
| OwnershipType | VARCHAR(20) | Lo·∫°i s·ªü h·ªØu | Personal, Company, Lease, Rental |
| UsageType | VARCHAR(20) | M·ª•c ƒë√≠ch s·ª≠ d·ª•ng | Private, Commercial, Taxi, Delivery, Rental |

#### **Th√¥ng tin b·∫£o hi·ªÉm:**
| Column | Type | Description | Example |
|--------|------|-------------|---------|
| InsuranceCompany | VARCHAR(100) | C√¥ng ty BH | B·∫£o Vi·ªát |
| PolicyNumber | VARCHAR(50) | S·ªë h·ª£p ƒë·ªìng | BV123456789 |
| CoverageType | VARCHAR(50) | Lo·∫°i BH | Comprehensive |
| InsuranceStartDate | DATETIME | Ng√†y b·∫Øt ƒë·∫ßu | 2024-01-01 |
| InsuranceEndDate | DATETIME | Ng√†y k·∫øt th√∫c | 2024-12-31 |
| InsurancePremium | DECIMAL(15,2) | Ph√≠ BH | 5000000 |
| HasInsurance | BOOLEAN | C√≥ BH | TRUE |
| IsInsuranceActive | BOOLEAN | BH c√≤n hi·ªáu l·ª±c | TRUE |

#### **Th√¥ng tin claim:**
| Column | Type | Description | Example |
|--------|------|-------------|---------|
| ClaimNumber | VARCHAR(50) | S·ªë claim | CLM-2024-001 |
| AdjusterName | VARCHAR(100) | ƒêi·ªÅu ch·ªânh vi√™n | Nguy·ªÖn VƒÉn A |
| AdjusterPhone | VARCHAR(20) | SƒêT ƒëi·ªÅu ch·ªânh | 0901234567 |
| ClaimDate | DATETIME | Ng√†y claim | 2024-01-15 |
| ClaimSettlementDate | DATETIME | Ng√†y gi·∫£i quy·∫øt | 2024-01-30 |
| ClaimAmount | DECIMAL(15,2) | S·ªë ti·ªÅn claim | 4500000 |
| ClaimStatus | VARCHAR(20) | Tr·∫°ng th√°i | Approved |

#### **Th√¥ng tin c√¥ng ty (n·∫øu xe c√¥ng ty):**
| Column | Type | Description | Example |
|--------|------|-------------|---------|
| CompanyName | VARCHAR(200) | T√™n c√¥ng ty | C√¥ng ty TNHH ABC |
| TaxCode | VARCHAR(20) | M√£ s·ªë thu·∫ø | 0123456789 |
| ContactPerson | VARCHAR(100) | Ng∆∞·ªùi li√™n h·ªá | Tr·∫ßn VƒÉn B |
| ContactPhone | VARCHAR(20) | SƒêT li√™n h·ªá | 0987654321 |
| Department | VARCHAR(100) | Ph√≤ng ban | V·∫≠n h√†nh |
| CostCenter | VARCHAR(50) | Trung t√¢m chi ph√≠ | VH-001 |

**Relationships:**
- CustomerId ‚Üí Customers(Id)

**Indexes:**
- UNIQUE: LicensePlate, VIN
- INDEX: CustomerId, Brand+Model, OwnershipType, UsageType, HasInsurance

---

### **5. VehicleInsurances Table**
Qu·∫£n l√Ω b·∫£o hi·ªÉm xe chi ti·∫øt (l·ªãch s·ª≠ b·∫£o hi·ªÉm).

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID b·∫£o hi·ªÉm | 1 |
| VehicleId | INT (FK) | Xe | 1 |
| PolicyNumber | VARCHAR(50) UNIQUE | S·ªë h·ª£p ƒë·ªìng | BV2024001 |
| InsuranceCompany | VARCHAR(100) | C√¥ng ty BH | B·∫£o Vi·ªát |
| CoverageType | VARCHAR(50) | Lo·∫°i BH | Comprehensive |
| StartDate | DATETIME | Ng√†y b·∫Øt ƒë·∫ßu | 2024-01-01 |
| EndDate | DATETIME | Ng√†y k·∫øt th√∫c | 2024-12-31 |
| PremiumAmount | DECIMAL(15,2) | Ph√≠ BH | 5000000 |
| Currency | VARCHAR(3) | ƒê∆°n v·ªã ti·ªÅn | VND |
| PaymentMethod | VARCHAR(20) | Ph∆∞∆°ng th·ª©c TT | Bank Transfer |
| AgentName | VARCHAR(100) | ƒê·∫°i l√Ω BH | Nguy·ªÖn VƒÉn C |
| AgentPhone | VARCHAR(20) | SƒêT ƒë·∫°i l√Ω | 0909123456 |
| AgentEmail | VARCHAR(100) | Email ƒë·∫°i l√Ω | agent@baoviet.com |
| CoverageDetails | TEXT | Chi ti·∫øt BH | Full coverage... |
| DeductibleAmount | VARCHAR(100) | S·ªë ti·ªÅn kh·∫•u tr·ª´ | 500000 |
| Exclusions | TEXT | Lo·∫°i tr·ª´ | War, terrorism... |
| EmergencyContact | VARCHAR(100) | Li√™n h·ªá kh·∫©n c·∫•p | 1900-xxxx |
| EmergencyPhone | VARCHAR(20) | SƒêT kh·∫©n c·∫•p | 1900123456 |
| IsActive | BOOLEAN | C√≤n hi·ªáu l·ª±c | TRUE |
| IsRenewed | BOOLEAN | ƒê√£ gia h·∫°n | FALSE |
| RenewalDate | DATETIME | Ng√†y gia h·∫°n | NULL |
| PreviousPolicyId | INT (FK) | BH tr∆∞·ªõc ƒë√≥ | NULL |

**Relationships:**
- VehicleId ‚Üí Vehicles(Id)
- PreviousPolicyId ‚Üí VehicleInsurances(Id) (self-reference)

**Indexes:**
- UNIQUE: PolicyNumber
- INDEX: VehicleId, InsuranceCompany, IsActive, EndDate

---

### **6. InsuranceClaims Table**
Qu·∫£n l√Ω claim b·∫£o hi·ªÉm.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID claim | 1 |
| VehicleInsuranceId | INT (FK) | B·∫£o hi·ªÉm | 1 |
| ServiceOrderId | INT (FK) | ƒê∆°n s·ª≠a ch·ªØa | 1 |
| ClaimNumber | VARCHAR(50) UNIQUE | S·ªë claim | CLM-2024-001 |
| ClaimDate | DATETIME | Ng√†y claim | 2024-01-15 |
| ClaimStatus | VARCHAR(20) | Tr·∫°ng th√°i | Pending |
| IncidentType | VARCHAR(100) | Lo·∫°i s·ª± c·ªë | Accident |
| IncidentDescription | TEXT | M√¥ t·∫£ s·ª± c·ªë | Va ch·∫°m t·ª´ ph√≠a sau |
| IncidentDate | DATETIME | Ng√†y s·ª± c·ªë | 2024-01-14 |
| IncidentLocation | VARCHAR(200) | ƒê·ªãa ƒëi·ªÉm | 123 Nguy·ªÖn Hu·ªá |
| PoliceReportNumber | VARCHAR(100) | S·ªë bi√™n b·∫£n CA | PB-2024-001 |
| AdjusterName | VARCHAR(100) | ƒêi·ªÅu ch·ªânh vi√™n | Tr·∫ßn VƒÉn D |
| AdjusterPhone | VARCHAR(20) | SƒêT | 0908123456 |
| AdjusterEmail | VARCHAR(100) | Email | adjuster@baoviet.com |
| EstimatedDamage | DECIMAL(15,2) | Thi·ªát h·∫°i ∆∞·ªõc t√≠nh | 4500000 |
| ApprovedAmount | DECIMAL(15,2) | S·ªë ti·ªÅn duy·ªát | 4200000 |
| PaidAmount | DECIMAL(15,2) | ƒê√£ thanh to√°n | 4200000 |
| ApprovalDate | DATETIME | Ng√†y duy·ªát | 2024-01-20 |
| SettlementDate | DATETIME | Ng√†y gi·∫£i quy·∫øt | 2024-01-30 |
| RequiresInspection | BOOLEAN | C·∫ßn ki·ªÉm tra | TRUE |
| InspectionDate | DATETIME | Ng√†y ki·ªÉm tra | 2024-01-16 |
| InspectorName | VARCHAR(100) | Ng∆∞·ªùi ki·ªÉm tra | L√™ VƒÉn E |
| InspectionReport | TEXT | B√°o c√°o | Damage to rear bumper... |
| IsRepairCompleted | BOOLEAN | ƒê√£ s·ª≠a xong | TRUE |
| RepairCompletionDate | DATETIME | Ng√†y ho√†n th√†nh | 2024-01-28 |

**Relationships:**
- VehicleInsuranceId ‚Üí VehicleInsurances(Id)
- ServiceOrderId ‚Üí ServiceOrders(Id)

**Indexes:**
- UNIQUE: ClaimNumber
- INDEX: VehicleInsuranceId, ServiceOrderId, ClaimStatus, ClaimDate

---

### **7. InsuranceClaimDocuments Table**
T√†i li·ªáu ƒë√≠nh k√®m claim.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID t√†i li·ªáu | 1 |
| InsuranceClaimId | INT (FK) | Claim | 1 |
| DocumentName | VARCHAR(200) | T√™n t√†i li·ªáu | ·∫¢nh hi·ªán tr∆∞·ªùng 1 |
| DocumentType | VARCHAR(50) | Lo·∫°i t√†i li·ªáu | Photo |
| FilePath | VARCHAR(500) | ƒê∆∞·ªùng d·∫´n | /uploads/claims/... |
| FileName | VARCHAR(100) | T√™n file | IMG_001.jpg |
| FileExtension | VARCHAR(20) | Ph·∫ßn m·ªü r·ªông | .jpg |
| FileSize | BIGINT | K√≠ch th∆∞·ªõc (bytes) | 2048576 |
| Description | TEXT | M√¥ t·∫£ | Front view of damage |
| UploadDate | DATETIME | Ng√†y upload | 2024-01-15 |
| UploadedBy | INT | Ng∆∞·ªùi upload | 1 |
| UploadedByName | VARCHAR(100) | T√™n ng∆∞·ªùi upload | Nguy·ªÖn VƒÉn A |
| IsRequired | BOOLEAN | B·∫Øt bu·ªôc | TRUE |
| IsVerified | BOOLEAN | ƒê√£ x√°c minh | TRUE |
| VerifiedDate | DATETIME | Ng√†y x√°c minh | 2024-01-16 |
| VerifiedBy | VARCHAR(100) | Ng∆∞·ªùi x√°c minh | Tr·∫ßn VƒÉn D |
| VerificationNotes | TEXT | Ghi ch√∫ x√°c minh | Document verified OK |

**Relationships:**
- InsuranceClaimId ‚Üí InsuranceClaims(Id)

**Indexes:**
- INDEX: InsuranceClaimId, DocumentType, IsVerified

---

## üì¶ PARTS & INVENTORY MANAGEMENT MODULE

### **8. PartGroups Table**
Nh√≥m ph·ª• t√πng ƒë·ªÉ qu·∫£n l√Ω t∆∞∆°ng th√≠ch.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID nh√≥m | 1 |
| GroupName | VARCHAR(100) | T√™n nh√≥m | B·ªô l·ªçc gi√≥ ƒë·ªông c∆° |
| GroupCode | VARCHAR(50) UNIQUE | M√£ nh√≥m | AIR_FILTER_ENGINE |
| Category | VARCHAR(100) | Danh m·ª•c | Engine System |
| SubCategory | VARCHAR(100) | Danh m·ª•c ph·ª• | Air Intake |
| Description | TEXT | M√¥ t·∫£ | Filter air into engine |
| Function | VARCHAR(100) | Ch·ª©c nƒÉng | L·ªçc kh√¥ng kh√≠ |
| Unit | VARCHAR(50) | ƒê∆°n v·ªã | C√°i |
| IsActive | BOOLEAN | Ho·∫°t ƒë·ªông | TRUE |

**Indexes:**
- UNIQUE: GroupCode
- INDEX: GroupName, Category, IsActive

---

### **9. Parts Table**
Qu·∫£n l√Ω ph·ª• t√πng chi ti·∫øt.

#### **Th√¥ng tin c∆° b·∫£n:**
| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID ph·ª• t√πng | 1 |
| PartNumber | VARCHAR(50) UNIQUE | M√£ ph·ª• t√πng | HEADLIGHT001 |
| PartName | VARCHAR(200) | T√™n ph·ª• t√πng | ƒê√®n pha MB C-Class |
| Description | TEXT | M√¥ t·∫£ | LED headlight for... |
| Category | VARCHAR(100) | Danh m·ª•c | Electrical System |
| Brand | VARCHAR(100) | H√£ng | Mercedes-Benz |
| CostPrice | DECIMAL(15,2) | Gi√° nh·∫≠p | 2500000 |
| AverageCostPrice | DECIMAL(15,2) | Gi√° nh·∫≠p TB | 2500000 |
| SellPrice | DECIMAL(15,2) | Gi√° b√°n | 3200000 |
| QuantityInStock | INT | T·ªìn kho | 5 |
| MinimumStock | INT | T·ªìn t·ªëi thi·ªÉu | 1 |
| ReorderLevel | INT | M·ª©c ƒë·∫∑t l·∫°i | 2 |
| Unit | VARCHAR(20) | ƒê∆°n v·ªã | C√°i |
| Location | VARCHAR(100) | V·ªã tr√≠ kho | Kho D-02 |

#### **‚≠ê Ph√¢n lo·∫°i ngu·ªìn g·ªëc v√† h√≥a ƒë∆°n (M·ªöI):**
| Column | Type | Description | Values |
|--------|------|-------------|--------|
| SourceType | VARCHAR(30) | Ngu·ªìn g·ªëc | Purchased, Used, Refurbished, Salvage |
| InvoiceType | VARCHAR(50) | Lo·∫°i h√≥a ƒë∆°n | WithInvoice, WithoutInvoice, Internal |
| HasInvoice | BOOLEAN | C√≥ h√≥a ƒë∆°n | TRUE/FALSE |
| CanUseForCompany | BOOLEAN | D√πng cho c√¥ng ty | TRUE/FALSE |
| CanUseForInsurance | BOOLEAN | D√πng cho BH | TRUE/FALSE |
| CanUseForIndividual | BOOLEAN | D√πng cho c√° nh√¢n | TRUE |
| Condition | VARCHAR(20) | T√¨nh tr·∫°ng | New, Used, Refurbished, AsIs |
| SourceReference | VARCHAR(100) | Ngu·ªìn chi ti·∫øt | "Th√°o t·ª´ xe 30A-12345" |

**üí° QUY T·∫ÆC PH√ÇN LO·∫†I:**
```
‚úÖ H√†ng M·ªöI C√ì H√ìA ƒê∆†N:
   SourceType = Purchased
   InvoiceType = WithInvoice
   HasInvoice = TRUE
   CanUseForCompany = TRUE
   CanUseForInsurance = TRUE
   CanUseForIndividual = TRUE
   Condition = New

‚ö†Ô∏è H√†ng M·ªöI KH√îNG H√ìA ƒê∆†N:
   SourceType = Purchased
   InvoiceType = WithoutInvoice
   HasInvoice = FALSE
   CanUseForCompany = FALSE
   CanUseForInsurance = FALSE
   CanUseForIndividual = TRUE
   Condition = New

‚ö†Ô∏è H√†ng TH√ÅO T·ª™ XE C≈®:
   SourceType = Used
   InvoiceType = WithoutInvoice
   HasInvoice = FALSE
   CanUseForCompany = FALSE
   CanUseForInsurance = FALSE
   CanUseForIndividual = TRUE
   Condition = Used
   SourceReference = "Th√°o t·ª´ xe 30A-12345"
```

#### **Th√¥ng tin k·ªπ thu·∫≠t:**
| Column | Type | Description | Example |
|--------|------|-------------|---------|
| PartGroupId | INT (FK) | Nh√≥m ph·ª• t√πng | 9 (Headlight) |
| OEMNumber | VARCHAR(50) | S·ªë PT ch√≠nh h√£ng | A2058200240 |
| AftermarketNumber | VARCHAR(50) | S·ªë PT thay th·∫ø | OSRAM LED |
| Manufacturer | VARCHAR(100) | Nh√† s·∫£n xu·∫•t | Osram |
| Dimensions | VARCHAR(100) | K√≠ch th∆∞·ªõc | 150x80x120mm |
| Weight | DECIMAL(10,3) | Tr·ªçng l∆∞·ª£ng (kg) | 2.100 |
| Material | VARCHAR(50) | Ch·∫•t li·ªáu | Nh·ª±a + LED |
| Color | VARCHAR(50) | M√†u s·∫Øc | Trong su·ªët |
| WarrantyMonths | INT | B·∫£o h√†nh (th√°ng) | 24 |
| WarrantyConditions | VARCHAR(100) | ƒêi·ªÅu ki·ªán BH | 2 nƒÉm ho·∫∑c 50,000km |
| IsOEM | BOOLEAN | PT ch√≠nh h√£ng | TRUE |
| IsActive | BOOLEAN | C√≤n kinh doanh | TRUE |

**Relationships:**
- PartGroupId ‚Üí PartGroups(Id)

**Indexes:**
- UNIQUE: PartNumber
- INDEX: PartName, Category, Brand, PartGroupId, QuantityInStock, HasInvoice, SourceType, IsActive

---

### **10. PartInventoryBatches Table (‚≠ê M·ªöI)**
Qu·∫£n l√Ω ph·ª• t√πng theo L√î H√ÄNG ƒë·ªÉ ph√¢n bi·ªát h√≥a ƒë∆°n.

**üí° L√ù DO C·∫¶N TABLE N√ÄY:**
- C√πng 1 ph·ª• t√πng c√≥ th·ªÉ nh·∫≠p nhi·ªÅu l·∫ßn t·ª´ nhi·ªÅu ngu·ªìn kh√°c nhau
- L√¥ c√≥ h√≥a ƒë∆°n VAT ‚Üí D√πng cho c√¥ng ty/BH
- L√¥ kh√¥ng h√≥a ƒë∆°n ‚Üí Ch·ªâ d√πng cho c√° nh√¢n
- L√¥ th√°o xe c≈© ‚Üí Ch·ªâ d√πng cho c√° nh√¢n
- Theo d√µi ch√≠nh x√°c gi√° v·ªën t·ª´ng l√¥ (FIFO/LIFO)

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID l√¥ h√†ng | 1 |
| PartId | INT (FK) | Ph·ª• t√πng | 1 |
| BatchNumber | VARCHAR(50) UNIQUE | M√£ l√¥ | BATCH-2024-001 |
| ReceiveDate | DATETIME | Ng√†y nh·∫≠p | 2024-01-10 |
| QuantityReceived | INT | SL nh·∫≠p | 5 |
| QuantityRemaining | INT | SL c√≤n l·∫°i | 3 |
| UnitCost | DECIMAL(15,2) | Gi√° nh·∫≠p/c√°i | 2500000 |

**Ph√¢n lo·∫°i ngu·ªìn g·ªëc:**
| Column | Type | Description | Values |
|--------|------|-------------|--------|
| SourceType | VARCHAR(30) | Ngu·ªìn g·ªëc | Purchased, Used, Refurbished, Salvage |
| Condition | VARCHAR(20) | T√¨nh tr·∫°ng | New, Used, Refurbished, AsIs |

**Th√¥ng tin h√≥a ƒë∆°n:**
| Column | Type | Description | Example |
|--------|------|-------------|---------|
| HasInvoice | BOOLEAN | C√≥ h√≥a ƒë∆°n | TRUE |
| InvoiceNumber | VARCHAR(50) | S·ªë h√≥a ƒë∆°n | BV20240001 |
| InvoiceDate | DATETIME | Ng√†y h√≥a ƒë∆°n | 2024-01-10 |
| SupplierName | VARCHAR(100) | Nh√† cung c·∫•p | MB Vietnam |
| SupplierId | INT (FK) | ID NCC | 1 |

**Ph√¢n lo·∫°i s·ª≠ d·ª•ng:**
| Column | Type | Description | Value |
|--------|------|-------------|-------|
| CanUseForCompany | BOOLEAN | D√πng cho c√¥ng ty | TRUE |
| CanUseForInsurance | BOOLEAN | D√πng cho BH | TRUE |
| CanUseForIndividual | BOOLEAN | D√πng cho c√° nh√¢n | TRUE |

**Ngu·ªìn g·ªëc chi ti·∫øt:**
| Column | Type | Description | Example |
|--------|------|-------------|---------|
| SourceReference | VARCHAR(100) | Chi ti·∫øt ngu·ªìn | Nh·∫≠p t·ª´ MB Vietnam |
| SourceVehicle | VARCHAR(100) | Bi·ªÉn s·ªë xe | 30A-12345 |
| SourceVehicleId | INT (FK) | ID xe | 1 |
| SourceServiceOrderId | INT (FK) | ID ƒë∆°n h√†ng | 15 |

**Th√¥ng tin l∆∞u tr·ªØ:**
| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Location | VARCHAR(100) | V·ªã tr√≠ | Kho D |
| Shelf | VARCHAR(50) | K·ªá | D-02 |
| Bin | VARCHAR(50) | NgƒÉn | D-02-A |
| ExpiryDate | DATETIME | H·∫°n s·ª≠ d·ª•ng | NULL |
| IsExpired | BOOLEAN | H·∫øt h·∫°n | FALSE |
| IsActive | BOOLEAN | C√≤n t·ªìn | TRUE |

**Relationships:**
- PartId ‚Üí Parts(Id)
- SupplierId ‚Üí Suppliers(Id)
- SourceVehicleId ‚Üí Vehicles(Id)
- SourceServiceOrderId ‚Üí ServiceOrders(Id)

**Indexes:**
- UNIQUE: BatchNumber
- INDEX: PartId, HasInvoice, SourceType, IsActive

---

### **11. PartBatchUsages Table (‚≠ê M·ªöI)**
Theo d√µi s·ª≠ d·ª•ng ph·ª• t√πng t·ª´ t·ª´ng l√¥.

**üí° L√ù DO C·∫¶N TABLE N√ÄY:**
- Theo d√µi ph·ª• t√πng t·ª´ l√¥ n√†o ƒë∆∞·ª£c s·ª≠ d·ª•ng
- ƒê·∫£m b·∫£o kh√¥ng d√πng nh·∫ßm h√†ng kh√¥ng Hƒê cho c√¥ng ty/BH
- T√≠nh gi√° v·ªën ch√≠nh x√°c theo ph∆∞∆°ng ph√°p FIFO/LIFO
- B√°o c√°o theo ngu·ªìn g·ªëc ph·ª• t√πng

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID s·ª≠ d·ª•ng | 1 |
| PartInventoryBatchId | INT (FK) | L√¥ h√†ng | 1 |
| ServiceOrderId | INT (FK) | ƒê∆°n h√†ng | 1 |
| ServiceOrderPartId | INT (FK) | Chi ti·∫øt PT | 1 |
| QuantityUsed | INT | SL s·ª≠ d·ª•ng | 2 |
| UnitCost | DECIMAL(15,2) | Gi√° v·ªën | 2500000 |
| UnitPrice | DECIMAL(15,2) | Gi√° b√°n | 3200000 |
| TotalCost | DECIMAL(15,2) | T·ªïng gi√° v·ªën | 5000000 |
| TotalPrice | DECIMAL(15,2) | T·ªïng gi√° b√°n | 6400000 |
| UsageDate | DATETIME | Ng√†y s·ª≠ d·ª•ng | 2024-01-16 |

**Th√¥ng tin kh√°ch h√†ng:**
| Column | Type | Description | Example |
|--------|------|-------------|---------|
| CustomerName | VARCHAR(100) | T√™n KH | Nguy·ªÖn Minh Tu·∫•n |
| CustomerId | INT (FK) | ID KH | 1 |
| CustomerType | VARCHAR(20) | Lo·∫°i KH | Individual, Company, Insurance |

**Th√¥ng tin xe:**
| Column | Type | Description | Example |
|--------|------|-------------|---------|
| VehiclePlate | VARCHAR(20) | Bi·ªÉn s·ªë | 30A-12345 |
| VehicleId | INT (FK) | ID xe | 1 |

**Th√¥ng tin h√≥a ƒë∆°n xu·∫•t:**
| Column | Type | Description | Example |
|--------|------|-------------|---------|
| RequiresInvoice | BOOLEAN | C·∫ßn Hƒê | TRUE |
| OutgoingInvoiceNumber | VARCHAR(50) | S·ªë Hƒê xu·∫•t | Hƒê-2024-001 |
| InvoiceDate | DATETIME | Ng√†y Hƒê | 2024-01-16 |

**Relationships:**
- PartInventoryBatchId ‚Üí PartInventoryBatches(Id)
- ServiceOrderId ‚Üí ServiceOrders(Id)
- ServiceOrderPartId ‚Üí ServiceOrderParts(Id)
- CustomerId ‚Üí Customers(Id)
- VehicleId ‚Üí Vehicles(Id)

**Indexes:**
- INDEX: PartInventoryBatchId, ServiceOrderId, CustomerId, VehicleId, UsageDate

---

### **12. StockTransactions Table**
Giao d·ªãch kho (nh·∫≠p/xu·∫•t/ƒëi·ªÅu ch·ªânh).

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID giao d·ªãch | 1 |
| PartId | INT (FK) | Ph·ª• t√πng | 1 |
| TransactionNumber | VARCHAR(50) UNIQUE | M√£ giao d·ªãch | STK-2024-001 |
| TransactionType | ENUM | Lo·∫°i GD | In, Out, Transfer, Adjustment |
| Quantity | INT | S·ªë l∆∞·ª£ng | 5 |
| UnitCost | DECIMAL(15,2) | Gi√° ƒë∆°n v·ªã | 2500000 |
| TotalCost | DECIMAL(15,2) | T·ªïng gi√° tr·ªã | 12500000 |
| TransactionDate | DATETIME | Ng√†y GD | 2024-01-10 |
| SupplierName | VARCHAR(100) | NCC | MB Vietnam |
| InvoiceNumber | VARCHAR(50) | S·ªë h√≥a ƒë∆°n | BV20240001 |
| **HasInvoice** | **BOOLEAN** | **C√≥ Hƒê** | **TRUE** |
| ReferenceNumber | VARCHAR(100) | S·ªë tham chi·∫øu | PO-2024-001 |
| **SourceType** | **VARCHAR(30)** | **Ngu·ªìn g·ªëc** | **Purchased** |
| **SourceReference** | **VARCHAR(100)** | **Chi ti·∫øt ngu·ªìn** | **Nh·∫≠p t·ª´ MB** |
| **Condition** | **VARCHAR(20)** | **T√¨nh tr·∫°ng** | **New** |
| ServiceOrderId | INT (FK) | ƒê∆°n h√†ng | NULL |
| EmployeeId | INT (FK) | Nh√¢n vi√™n | 1 |
| Location | VARCHAR(100) | V·ªã tr√≠ | Kho D-02 |
| StockAfter | INT | T·ªìn sau GD | 5 |

**Relationships:**
- PartId ‚Üí Parts(Id)
- ServiceOrderId ‚Üí ServiceOrders(Id)
- EmployeeId ‚Üí Employees(Id)

**Indexes:**
- UNIQUE: TransactionNumber
- INDEX: PartId, TransactionType, TransactionDate, ServiceOrderId, HasInvoice

---

## ‚öôÔ∏è SERVICE MANAGEMENT MODULE

### **13. ServiceTypes Table**
Ph√¢n lo·∫°i d·ªãch v·ª•.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID lo·∫°i DV | 1 |
| TypeName | VARCHAR(50) | T√™n lo·∫°i | Thay th·∫ø |
| TypeCode | VARCHAR(20) UNIQUE | M√£ lo·∫°i | REPLACE |
| Description | TEXT | M√¥ t·∫£ | Thay th·∫ø ph·ª• t√πng m·ªõi |
| Category | VARCHAR(50) | Danh m·ª•c | Mechanical |
| IsActive | BOOLEAN | Ho·∫°t ƒë·ªông | TRUE |

**Indexes:**
- UNIQUE: TypeCode
- INDEX: TypeName, Category, IsActive

---

### **14. Services Table**
Danh s√°ch d·ªãch v·ª•.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID d·ªãch v·ª• | 1 |
| Name | VARCHAR(200) | T√™n DV | Thay ƒë√®n pha MB C-Class |
| Description | TEXT | M√¥ t·∫£ | Replace LED headlight |
| Price | DECIMAL(15,2) | Gi√° d·ªãch v·ª• | 200000 |
| Duration | INT | Th·ªùi gian (ph√∫t) | 90 |
| Category | VARCHAR(50) | Danh m·ª•c | Electrical |
| ServiceTypeId | INT (FK) | Lo·∫°i DV | 1 (Thay th·∫ø) |
| LaborType | VARCHAR(50) | Lo·∫°i c√¥ng | Th√°o, L·∫Øp |
| SkillLevel | VARCHAR(100) | Tr√¨nh ƒë·ªô | Trung b√¨nh |
| LaborHours | INT | S·ªë gi·ªù c√¥ng | 1.5 |
| LaborRate | DECIMAL(15,2) | ƒê∆°n gi√° c√¥ng | 50000 |
| TotalLaborCost | DECIMAL(15,2) | T·ªïng ti·ªÅn c√¥ng | 75000 |
| RequiredTools | VARCHAR(100) | D·ª•ng c·ª• | C·ªù l√™ 10, tu·ªëc n∆° v√≠t |
| RequiredSkills | VARCHAR(100) | K·ªπ nƒÉng | Th·ª£ ƒëi·ªán |
| WorkInstructions | TEXT | H∆∞·ªõng d·∫´n | Th√°o ·ªëc, th√°o d√¢y... |
| IsActive | BOOLEAN | Ho·∫°t ƒë·ªông | TRUE |

**Relationships:**
- ServiceTypeId ‚Üí ServiceTypes(Id)

**Indexes:**
- INDEX: Name, Category, ServiceTypeId, IsActive

---

### **15. LaborCategories Table**
Danh m·ª•c c√¥ng lao ƒë·ªông.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID danh m·ª•c | 1 |
| CategoryName | VARCHAR(100) | T√™n danh m·ª•c | C√¥ng th√°o l·∫Øp |
| CategoryCode | VARCHAR(20) UNIQUE | M√£ danh m·ª•c | REMOVE_INSTALL |
| Description | TEXT | M√¥ t·∫£ | Th√°o v√† l·∫Øp ƒë·∫∑t PT |
| BaseRate | DECIMAL(15,2) | ƒê∆°n gi√° c∆° b·∫£n | 50000 |
| IsActive | BOOLEAN | Ho·∫°t ƒë·ªông | TRUE |

**Indexes:**
- UNIQUE: CategoryCode
- INDEX: CategoryName, IsActive

---

### **16. LaborItems Table**
Chi ti·∫øt c√¥ng lao ƒë·ªông.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID c√¥ng | 1 |
| LaborCategoryId | INT (FK) | Danh m·ª•c | 1 (Th√°o l·∫Øp) |
| PartGroupId | INT (FK) | Nh√≥m PT | 9 (ƒê√®n pha) |
| ItemName | VARCHAR(200) | T√™n c√¥ng | C√¥ng th√°o ƒë√®n pha |
| PartName | VARCHAR(100) | T√™n PT | ƒê√®n pha |
| Description | TEXT | M√¥ t·∫£ | Remove and install |
| StandardHours | DECIMAL(8,2) | Gi·ªù c√¥ng chu·∫©n | 1.5 |
| LaborRate | DECIMAL(15,2) | ƒê∆°n gi√° | 50000 |
| TotalLaborCost | DECIMAL(15,2) | T·ªïng ti·ªÅn c√¥ng | 75000 |
| SkillLevel | VARCHAR(100) | Tr√¨nh ƒë·ªô | Trung b√¨nh |
| RequiredTools | VARCHAR(100) | D·ª•ng c·ª• | C·ªù l√™ 10 |
| WorkSteps | TEXT | B∆∞·ªõc th·ª±c hi·ªán | 1. Th√°o ·ªëc... |
| Difficulty | VARCHAR(100) | ƒê·ªô kh√≥ | Trung b√¨nh |
| IsActive | BOOLEAN | Ho·∫°t ƒë·ªông | TRUE |

**Relationships:**
- LaborCategoryId ‚Üí LaborCategories(Id)
- PartGroupId ‚Üí PartGroups(Id)

**Indexes:**
- INDEX: LaborCategoryId, PartGroupId, ItemName, IsActive

---

## üõ†Ô∏è SERVICE ORDER MODULE

### **17. ServiceOrders Table**
ƒê∆°n h√†ng s·ª≠a ch·ªØa.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID ƒë∆°n h√†ng | 1 |
| OrderNumber | VARCHAR(50) UNIQUE | S·ªë ƒë∆°n | SO-2024-001 |
| CustomerId | INT (FK) | Kh√°ch h√†ng | 1 |
| VehicleId | INT (FK) | Xe | 1 |
| OrderDate | DATETIME | Ng√†y t·∫°o | 2024-01-15 10:30 |
| ScheduledDate | DATETIME | Ng√†y h·∫πn | 2024-01-16 08:00 |
| CompletedDate | DATETIME | Ng√†y ho√†n th√†nh | 2024-01-16 15:00 |
| Status | VARCHAR(20) | Tr·∫°ng th√°i | Completed |
| Notes | TEXT | Ghi ch√∫ | Kh√°ch y√™u c·∫ßu... |

**Financial breakdown:**
| Column | Type | Description | Example |
|--------|------|-------------|---------|
| TotalAmount | DECIMAL(15,2) | T·ªïng ti·ªÅn | 2850000 |
| DiscountAmount | DECIMAL(15,2) | Gi·∫£m gi√° | 0 |
| FinalAmount | DECIMAL(15,2) | Th√†nh ti·ªÅn | 2850000 |
| ServiceTotal | DECIMAL(15,2) | Ti·ªÅn DV | 200000 |
| PartsTotal | DECIMAL(15,2) | Ti·ªÅn PT | 2000000 |
| LaborTotal | DECIMAL(15,2) | Ti·ªÅn c√¥ng | 75000 |
| AmountPaid | DECIMAL(15,2) | ƒê√£ thanh to√°n | 2850000 |
| AmountRemaining | DECIMAL(15,2) | C√≤n n·ª£ | 0 |
| PaymentStatus | VARCHAR(50) | TT thanh to√°n | Paid |

**References:**
| Column | Type | Description | Example |
|--------|------|-------------|---------|
| VehicleInspectionId | INT (FK) | Ki·ªÉm tra xe | NULL |
| ServiceQuotationId | INT (FK) | B√°o gi√° | NULL |
| PrimaryTechnicianId | INT (FK) | Th·ª£ ch√≠nh | 1 |

**Relationships:**
- CustomerId ‚Üí Customers(Id)
- VehicleId ‚Üí Vehicles(Id)
- PrimaryTechnicianId ‚Üí Employees(Id)

**Indexes:**
- UNIQUE: OrderNumber
- INDEX: CustomerId, VehicleId, Status, PaymentStatus, OrderDate

---

### **18. ServiceOrderItems Table**
Chi ti·∫øt d·ªãch v·ª• trong ƒë∆°n h√†ng.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID chi ti·∫øt | 1 |
| ServiceOrderId | INT (FK) | ƒê∆°n h√†ng | 1 |
| ServiceId | INT (FK) | D·ªãch v·ª• | 1 |
| Quantity | INT | S·ªë l∆∞·ª£ng | 1 |
| UnitPrice | DECIMAL(15,2) | ƒê∆°n gi√° | 200000 |
| TotalPrice | DECIMAL(15,2) | Th√†nh ti·ªÅn | 200000 |
| Notes | TEXT | Ghi ch√∫ | Replace LED headlight |

**Relationships:**
- ServiceOrderId ‚Üí ServiceOrders(Id)
- ServiceId ‚Üí Services(Id)

**Indexes:**
- INDEX: ServiceOrderId, ServiceId

---

### **19. ServiceOrderParts Table**
Chi ti·∫øt ph·ª• t√πng s·ª≠ d·ª•ng.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID chi ti·∫øt | 1 |
| ServiceOrderId | INT (FK) | ƒê∆°n h√†ng | 1 |
| PartId | INT (FK) | Ph·ª• t√πng | 8 |
| ServiceOrderItemId | INT (FK) | Chi ti·∫øt DV | 1 |
| Quantity | INT | S·ªë l∆∞·ª£ng | 1 |
| UnitCost | DECIMAL(15,2) | Gi√° v·ªën | 2500000 |
| UnitPrice | DECIMAL(15,2) | Gi√° b√°n | 2000000 |
| TotalPrice | DECIMAL(15,2) | Th√†nh ti·ªÅn | 2000000 |
| Notes | TEXT | Ghi ch√∫ | LED headlight OEM |
| IsWarranty | BOOLEAN | B·∫£o h√†nh | TRUE |
| WarrantyUntil | DATETIME | BH ƒë·∫øn | 2025-01-15 |

**Relationships:**
- ServiceOrderId ‚Üí ServiceOrders(Id)
- PartId ‚Üí Parts(Id)
- ServiceOrderItemId ‚Üí ServiceOrderItems(Id)

**Indexes:**
- INDEX: ServiceOrderId, PartId, ServiceOrderItemId

---

### **20. ServiceOrderLabors Table**
Chi ti·∫øt c√¥ng lao ƒë·ªông.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID c√¥ng | 1 |
| ServiceOrderId | INT (FK) | ƒê∆°n h√†ng | 1 |
| LaborItemId | INT (FK) | C√¥ng vi·ªác | 1 |
| EmployeeId | INT (FK) | Th·ª£ | 1 |
| ActualHours | DECIMAL(8,2) | Gi·ªù th·ª±c t·∫ø | 1.5 |
| LaborRate | DECIMAL(15,2) | ƒê∆°n gi√° | 50000 |
| TotalLaborCost | DECIMAL(15,2) | Ti·ªÅn c√¥ng | 75000 |
| Notes | TEXT | Ghi ch√∫ | Completed OK |
| Status | VARCHAR(20) | Tr·∫°ng th√°i | Completed |
| StartTime | DATETIME | B·∫Øt ƒë·∫ßu | 2024-01-16 08:00 |
| EndTime | DATETIME | K·∫øt th√∫c | 2024-01-16 09:30 |
| CompletedTime | DATETIME | Ho√†n th√†nh | 2024-01-16 09:30 |

**Relationships:**
- ServiceOrderId ‚Üí ServiceOrders(Id)
- LaborItemId ‚Üí LaborItems(Id)
- EmployeeId ‚Üí Employees(Id)

**Indexes:**
- INDEX: ServiceOrderId, LaborItemId, EmployeeId, Status

---

## üí∞ FINANCIAL MANAGEMENT MODULE

### **21. FinancialTransactions Table**
Giao d·ªãch t√†i ch√≠nh.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID GD | 1 |
| TransactionNumber | VARCHAR(50) UNIQUE | M√£ GD | FIN-2024-001 |
| TransactionType | ENUM | Lo·∫°i GD | Income, Expense, Transfer |
| Category | VARCHAR(50) | Danh m·ª•c | Service Revenue |
| SubCategory | VARCHAR(50) | Danh m·ª•c ph·ª• | Auto Repair |
| Amount | DECIMAL(15,2) | S·ªë ti·ªÅn | 2850000 |
| Currency | VARCHAR(3) | Ti·ªÅn t·ªá | VND |
| TransactionDate | DATETIME | Ng√†y GD | 2024-01-16 15:00 |
| PaymentMethod | VARCHAR(50) | Ph∆∞∆°ng th·ª©c | Cash |
| ReferenceNumber | VARCHAR(100) | Tham chi·∫øu | SO-2024-001 |
| Description | TEXT | M√¥ t·∫£ | Thu t·ª´ ƒë∆°n h√†ng... |
| RelatedEntity | VARCHAR(100) | Th·ª±c th·ªÉ | ServiceOrder |
| RelatedEntityId | INT | ID th·ª±c th·ªÉ | 1 |
| EmployeeId | INT (FK) | Nh√¢n vi√™n | 1 |
| ApprovedBy | VARCHAR(100) | Ng∆∞·ªùi duy·ªát | Manager A |
| ApprovedDate | DATETIME | Ng√†y duy·ªát | 2024-01-16 16:00 |
| Notes | TEXT | Ghi ch√∫ | Paid in full |
| IsApproved | BOOLEAN | ƒê√£ duy·ªát | TRUE |
| IsReconciled | BOOLEAN | ƒê√£ ƒë·ªëi chi·∫øu | FALSE |

**Relationships:**
- EmployeeId ‚Üí Employees(Id)

**Indexes:**
- UNIQUE: TransactionNumber
- INDEX: TransactionType, Category, TransactionDate, IsApproved

---

### **22. PaymentTransactions Table**
Thanh to√°n t·ª´ kh√°ch h√†ng.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID thanh to√°n | 1 |
| ServiceOrderId | INT (FK) | ƒê∆°n h√†ng | 1 |
| TransactionNumber | VARCHAR(50) UNIQUE | M√£ GD | PAY-2024-001 |
| PaymentDate | DATETIME | Ng√†y TT | 2024-01-16 15:00 |
| PaymentMethod | VARCHAR(50) | Ph∆∞∆°ng th·ª©c | Cash |
| Amount | DECIMAL(15,2) | S·ªë ti·ªÅn | 2850000 |
| Currency | VARCHAR(3) | Ti·ªÅn t·ªá | VND |
| ReferenceNumber | VARCHAR(100) | Tham chi·∫øu | SO-2024-001 |
| Description | TEXT | M√¥ t·∫£ | Payment for repairs |
| EmployeeId | INT (FK) | Thu ng√¢n | 1 |
| Notes | TEXT | Ghi ch√∫ | Paid in cash |

**Relationships:**
- ServiceOrderId ‚Üí ServiceOrders(Id)
- EmployeeId ‚Üí Employees(Id)

**Indexes:**
- UNIQUE: TransactionNumber
- INDEX: ServiceOrderId, PaymentDate, PaymentMethod

---

## üè¢ SUPPLIER & PURCHASE MANAGEMENT MODULE

### **23. Suppliers Table**
Nh√† cung c·∫•p.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID NCC | 1 |
| SupplierName | VARCHAR(100) | T√™n NCC | MB Vietnam |
| SupplierCode | VARCHAR(20) UNIQUE | M√£ NCC | MB-VN |
| ContactPerson | VARCHAR(100) | Ng∆∞·ªùi li√™n h·ªá | Nguy·ªÖn VƒÉn A |
| Phone | VARCHAR(20) | SƒêT | 0281234567 |
| Email | VARCHAR(100) | Email | sales@mbvn.com |
| Address | VARCHAR(200) | ƒê·ªãa ch·ªâ | 123 Nguy·ªÖn Hu·ªá, Q1 |
| City | VARCHAR(50) | Th√†nh ph·ªë | TP.HCM |
| Country | VARCHAR(50) | Qu·ªëc gia | Vietnam |
| Website | VARCHAR(100) | Website | mbvietnam.com.vn |
| TaxCode | VARCHAR(50) | M√£ s·ªë thu·∫ø | 0123456789 |
| BankAccount | VARCHAR(100) | TK ng√¢n h√†ng | 123456789 |
| BankName | VARCHAR(100) | Ng√¢n h√†ng | Vietcombank |
| PaymentTerms | VARCHAR(50) | ƒêi·ªÅu kho·∫£n TT | Net 30 |
| DeliveryTerms | VARCHAR(100) | ƒêi·ªÅu kho·∫£n giao | FOB |
| IsOEMSupplier | BOOLEAN | NCC ch√≠nh h√£ng | TRUE |
| IsActive | BOOLEAN | Ho·∫°t ƒë·ªông | TRUE |
| LastOrderDate | DATETIME | ƒê∆°n cu·ªëi | 2024-01-10 |
| TotalOrderValue | DECIMAL(15,2) | T·ªïng gi√° tr·ªã ƒë∆°n | 15800000 |

**Indexes:**
- UNIQUE: SupplierCode
- INDEX: SupplierName, IsActive, IsOEMSupplier

---

### **24. PurchaseOrders Table**
ƒê∆°n ƒë·∫∑t h√†ng t·ª´ NCC.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID ƒë∆°n | 1 |
| OrderNumber | VARCHAR(50) UNIQUE | S·ªë ƒë∆°n | PO-2024-001 |
| SupplierId | INT (FK) | NCC | 1 |
| OrderDate | DATETIME | Ng√†y ƒë·∫∑t | 2024-01-05 |
| ExpectedDeliveryDate | DATETIME | D·ª± ki·∫øn giao | 2024-01-10 |
| ActualDeliveryDate | DATETIME | Th·ª±c t·∫ø giao | 2024-01-10 |
| Status | VARCHAR(20) | Tr·∫°ng th√°i | Received |
| SupplierOrderNumber | VARCHAR(50) | S·ªë ƒë∆°n NCC | MB-2024-001 |
| ContactPerson | VARCHAR(100) | Ng∆∞·ªùi li√™n h·ªá | Sales A |
| ContactPhone | VARCHAR(20) | SƒêT | 0281234567 |
| ContactEmail | VARCHAR(100) | Email | sales@mbvn.com |
| DeliveryAddress | TEXT | ƒê·ªãa ch·ªâ giao | 456 L√™ L·ª£i, Q3 |
| PaymentTerms | VARCHAR(50) | ƒêi·ªÅu kho·∫£n TT | Net 30 |
| DeliveryTerms | VARCHAR(100) | ƒêi·ªÅu kho·∫£n giao | FOB |
| Currency | VARCHAR(3) | Ti·ªÅn t·ªá | VND |
| SubTotal | DECIMAL(15,2) | T·∫°m t√≠nh | 14000000 |
| TaxAmount | DECIMAL(15,2) | Thu·∫ø VAT | 1400000 |
| ShippingCost | DECIMAL(15,2) | Ph√≠ v·∫≠n chuy·ªÉn | 400000 |
| TotalAmount | DECIMAL(15,2) | T·ªïng c·ªông | 15800000 |
| EmployeeId | INT (FK) | Ng∆∞·ªùi t·∫°o | 1 |
| ApprovedBy | VARCHAR(100) | Ng∆∞·ªùi duy·ªát | Manager A |
| ApprovedDate | DATETIME | Ng√†y duy·ªát | 2024-01-05 |
| IsApproved | BOOLEAN | ƒê√£ duy·ªát | TRUE |

**Relationships:**
- SupplierId ‚Üí Suppliers(Id)
- EmployeeId ‚Üí Employees(Id)

**Indexes:**
- UNIQUE: OrderNumber
- INDEX: SupplierId, Status, OrderDate, IsApproved

---

### **25. PurchaseOrderItems Table**
Chi ti·∫øt ƒë∆°n ƒë·∫∑t h√†ng.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| Id | INT (PK) | ID chi ti·∫øt | 1 |
| PurchaseOrderId | INT (FK) | ƒê∆°n h√†ng | 1 |
| PartId | INT (FK) | Ph·ª• t√πng | 8 |
| QuantityOrdered | INT | SL ƒë·∫∑t | 5 |
| QuantityReceived | INT | SL nh·∫≠n | 5 |
| UnitPrice | DECIMAL(15,2) | ƒê∆°n gi√° | 2500000 |
| TotalPrice | DECIMAL(15,2) | Th√†nh ti·ªÅn | 12500000 |
| SupplierPartNumber | VARCHAR(50) | M√£ PT NCC | A2058200240 |
| PartDescription | VARCHAR(100) | M√¥ t·∫£ | LED Headlight |
| Unit | VARCHAR(50) | ƒê∆°n v·ªã | C√°i |
| ExpectedDeliveryDate | DATETIME | D·ª± ki·∫øn giao | 2024-01-10 |
| Notes | TEXT | Ghi ch√∫ | OEM parts |
| IsReceived | BOOLEAN | ƒê√£ nh·∫≠n | TRUE |
| ReceivedDate | DATETIME | Ng√†y nh·∫≠n | 2024-01-10 |

**Relationships:**
- PurchaseOrderId ‚Üí PurchaseOrders(Id)
- PartId ‚Üí Parts(Id)

**Indexes:**
- INDEX: PurchaseOrderId, PartId, IsReceived

---

## üìä RELATIONSHIPS DIAGRAM

### **Module Dependencies:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        VEHICLE MANAGEMENT                         ‚îÇ
‚îÇ  VehicleBrands ‚Üí VehicleModels ‚Üí EngineSpecifications            ‚îÇ
‚îÇ       ‚Üì                                                           ‚îÇ
‚îÇ  Vehicles ‚Üê VehicleInsurances ‚Üê InsuranceClaims                  ‚îÇ
‚îÇ       ‚Üì                              ‚Üì                            ‚îÇ
‚îÇ       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ InsuranceClaimDocuments‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì                          ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    PARTS & INVENTORY MANAGEMENT                   ‚îÇ
‚îÇ  PartGroups ‚Üê PartGroupCompatibility                             ‚îÇ
‚îÇ       ‚Üì                                                           ‚îÇ
‚îÇ  Parts ‚Üê PartInventoryBatches ‚Üê PartBatchUsages                  ‚îÇ
‚îÇ       ‚Üì            ‚Üì                    ‚Üì                         ‚îÇ
‚îÇ  StockTransactions ‚îÇ                    ‚îÇ                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì                          ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      SERVICE MANAGEMENT                           ‚îÇ
‚îÇ  ServiceTypes ‚Üí Services                                          ‚îÇ
‚îÇ  LaborCategories ‚Üí LaborItems                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      SERVICE ORDER MODULE                         ‚îÇ
‚îÇ  ServiceOrders ‚Üí ServiceOrderItems ‚Üí ServiceOrderParts           ‚îÇ
‚îÇ       ‚Üì              ‚Üì                    ‚Üì                        ‚îÇ
‚îÇ       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí ServiceOrderLabors                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    FINANCIAL MANAGEMENT                           ‚îÇ
‚îÇ  FinancialTransactions                                            ‚îÇ
‚îÇ  PaymentTransactions                                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                SUPPLIER & PURCHASE MANAGEMENT                     ‚îÇ
‚îÇ  Suppliers ‚Üí PurchaseOrders ‚Üí PurchaseOrderItems                 ‚îÇ
‚îÇ       ‚Üì                                                           ‚îÇ
‚îÇ  PartSuppliers                                                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîë KEY FEATURES

### **1. Ph√¢n lo·∫°i xe theo m·ª•c ƒë√≠ch s·ª≠ d·ª•ng**
- **OwnershipType**: Personal, Company, Lease, Rental
- **UsageType**: Private, Commercial, Taxi, Delivery

### **2. Qu·∫£n l√Ω b·∫£o hi·ªÉm ƒë·∫ßy ƒë·ªß**
- L·ªãch s·ª≠ b·∫£o hi·ªÉm t·ª´ng xe
- Theo d√µi claim chi ti·∫øt
- T√†i li·ªáu ƒë√≠nh k√®m claim

### **3. ‚≠ê Ph√¢n lo·∫°i ph·ª• t√πng theo h√≥a ƒë∆°n**
- **HasInvoice**: C√≥/Kh√¥ng h√≥a ƒë∆°n
- **CanUseForCompany**: D√πng cho xe c√¥ng ty
- **CanUseForInsurance**: D√πng cho xe b·∫£o hi·ªÉm
- **CanUseForIndividual**: D√πng cho xe c√° nh√¢n
- **SourceType**: Purchased, Used, Refurbished, Salvage
- **Condition**: New, Used, Refurbished, AsIs

### **4. ‚≠ê Qu·∫£n l√Ω theo l√¥ h√†ng**
- **PartInventoryBatches**: M·ªói l√¥ c√≥ th√¥ng tin Hƒê ri√™ng
- **PartBatchUsages**: Theo d√µi s·ª≠ d·ª•ng t·ª´ng l√¥
- T√≠nh gi√° v·ªën ch√≠nh x√°c theo FIFO/LIFO
- ƒê·∫£m b·∫£o kh√¥ng d√πng nh·∫ßm h√†ng kh√¥ng Hƒê cho c√¥ng ty/BH

### **5. Qu·∫£n l√Ω c√¥ng lao ƒë·ªông chi ti·∫øt**
- Ph√¢n lo·∫°i c√¥ng theo danh m·ª•c
- ƒê·ªãnh m·ª©c gi·ªù c√¥ng chu·∫©n
- Theo d√µi gi·ªù c√¥ng th·ª±c t·∫ø
- T√≠nh to√°n ti·ªÅn c√¥ng t·ª± ƒë·ªông

### **6. Qu·∫£n l√Ω t√†i ch√≠nh to√†n di·ªán**
- Thu nh·∫≠p t·ª´ d·ªãch v·ª•
- Chi ph√≠ nh·∫≠p h√†ng
- Thanh to√°n l∆∞∆°ng
- B√°o c√°o l√£i/l·ªó

---

## üìà TOTAL TABLES: 35

- **Vehicle Management**: 7 tables
- **Parts & Inventory**: 7 tables
- **Service Management**: 4 tables
- **Service Order**: 4 tables
- **Financial Management**: 2 tables
- **Supplier & Purchase**: 4 tables
- **Supporting**: 7 tables (Customers, Employees, Quotations, Inspections, Appointments...)

---

*Database Schema Version: 2.0.0*
*Last Updated: 2024-01-15*

