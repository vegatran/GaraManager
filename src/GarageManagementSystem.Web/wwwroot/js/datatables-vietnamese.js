/**
 * DataTables Vietnamese Language Configuration
 * Cấu hình ngôn ngữ tiếng Việt cho DataTables
 * 
 * Sử dụng file này để áp dụng ngôn ngữ tiếng Việt cho tất cả DataTables trong ứng dụng
 */

window.DataTablesVietnamese = {
    // Cấu hình ngôn ngữ tiếng Việt cho DataTables
    language: {
        "sProcessing": "Đang xử lý...",
        "sLengthMenu": "Hiển thị _MENU_ mục",
        "sZeroRecords": "Không tìm thấy dữ liệu phù hợp",
        "sEmptyTable": "Không có dữ liệu trong bảng",
        "sInfo": "Hiển thị _START_ đến _END_ của _TOTAL_ mục",
        "sInfoEmpty": "Hiển thị 0 đến 0 của 0 mục",
        "sInfoFiltered": "(được lọc từ _MAX_ mục)",
        "sInfoPostFix": "",
        "sSearch": "Tìm kiếm:",
        "sUrl": "",
        "sInfoThousands": ",",
        "sLoadingRecords": "Đang tải...",
        "sProcessing": "Đang xử lý...",
        "oPaginate": {
            "sFirst": "Đầu",
            "sPrevious": "Trước",
            "sNext": "Tiếp",
            "sLast": "Cuối"
        },
        "oAria": {
            "sSortAscending": ": sắp xếp cột tăng dần",
            "sSortDescending": ": sắp xếp cột giảm dần"
        },
        "select": {
            "rows": {
                "_": "Đã chọn %d dòng",
                "0": "Bấm vào một dòng để chọn",
                "1": "Đã chọn 1 dòng"
            }
        },
        "buttons": {
            "copy": "Sao chép",
            "copyTitle": "Sao chép vào clipboard",
            "copySuccess": {
                "_": "Đã sao chép %d dòng",
                "1": "Đã sao chép 1 dòng"
            },
            "print": "In",
            "colvis": "Hiển thị cột",
            "collection": {
                "action": "Thao tác",
                "buttonText": "Nút (_TEXT_)",
                "copy": "Sao chép",
                "copySuccess": {
                    "_": "Đã sao chép %d dòng",
                    "1": "Đã sao chép 1 dòng"
                },
                "copyTitle": "Sao chép vào clipboard",
                "csv": "CSV",
                "excel": "Excel",
                "pageLength": {
                    "-1": "Hiển thị tất cả",
                    "_": "Hiển thị %d dòng"
                },
                "pdf": "PDF",
                "print": "In",
                "colvis": "Hiển thị cột",
                "colvisRestore": "Khôi phục hiển thị"
            },
            "pageLength": {
                "-1": "Hiển thị tất cả",
                "_": "Hiển thị %d dòng"
            }
        },
        "searchBuilder": {
            "add": "Thêm điều kiện",
            "button": {
                "_": "Tìm kiếm nâng cao (%d)",
                "0": "Tìm kiếm nâng cao"
            },
            "clearAll": "Xóa tất cả",
            "condition": "Điều kiện",
            "conditions": {
                "date": {
                    "after": "Sau",
                    "before": "Trước",
                    "between": "Giữa",
                    "empty": "Trống",
                    "equals": "Bằng",
                    "not": "Không",
                    "notBetween": "Không giữa",
                    "notEmpty": "Không trống"
                },
                "number": {
                    "between": "Giữa",
                    "empty": "Trống",
                    "equals": "Bằng",
                    "gt": "Lớn hơn",
                    "gte": "Lớn hơn hoặc bằng",
                    "lt": "Nhỏ hơn",
                    "lte": "Nhỏ hơn hoặc bằng",
                    "not": "Không",
                    "notBetween": "Không giữa",
                    "notEmpty": "Không trống"
                },
                "string": {
                    "contains": "Chứa",
                    "empty": "Trống",
                    "endsWith": "Kết thúc bằng",
                    "equals": "Bằng",
                    "not": "Không",
                    "notEmpty": "Không trống",
                    "startsWith": "Bắt đầu bằng"
                }
            },
            "data": "Dữ liệu",
            "deleteTitle": "Xóa quy tắc lọc",
            "leftTitle": "Căn lề trái",
            "logicAnd": "Và",
            "logicOr": "Hoặc",
            "rightTitle": "Căn lề phải",
            "title": {
                "_": "Tìm kiếm nâng cao (%d)",
                "0": "Tìm kiếm nâng cao"
            },
            "value": "Giá trị"
        },
        "searchPanes": {
            "clearMessage": "Xóa tất cả",
            "collapse": {
                "_": "Thu gọn (%d)",
                "0": "Thu gọn"
            },
            "count": "{total}",
            "countFiltered": "{shown} ({total})",
            "emptyPanes": "Không có bảng lọc",
            "loadMessage": "Đang tải bảng lọc...",
            "title": "Bộ lọc đang hoạt động - %d"
        },
        "thousands": ",",
        "datetime": {
            "amPm": ["AM", "PM"],
            "hours": "Giờ",
            "minutes": "Phút",
            "months": {
                "0": "Tháng 1",
                "1": "Tháng 2",
                "10": "Tháng 11",
                "11": "Tháng 12",
                "2": "Tháng 3",
                "3": "Tháng 4",
                "4": "Tháng 5",
                "5": "Tháng 6",
                "6": "Tháng 7",
                "7": "Tháng 8",
                "8": "Tháng 9",
                "9": "Tháng 10"
            },
            "next": "Tiếp theo",
            "previous": "Trước đó",
            "seconds": "Giây",
            "unknown": "-",
            "weekdays": [
                "Chủ nhật",
                "Thứ hai",
                "Thứ ba",
                "Thứ tư",
                "Thứ năm",
                "Thứ sáu",
                "Thứ bảy"
            ]
        },
        "editor": {
            "close": "Đóng",
            "create": {
                "button": "Thêm mới",
                "title": "Thêm mới",
                "submit": "Lưu"
            },
            "edit": {
                "button": "Sửa",
                "title": "Sửa",
                "submit": "Cập nhật"
            },
            "error": {
                "system": "Đã xảy ra lỗi hệ thống (<a target=\"\\\"_blank\\\"\" href=\"\\\"/contact\\\">Thông tin thêm</a>)."
            },
            "multi": {
                "info": "Các dòng được chọn chứa các giá trị khác nhau cho đầu vào này. Để chỉnh sửa và đặt tất cả các mục cho đầu vào này thành cùng một giá trị, hãy nhấp hoặc nhấn vào đây, nếu không chúng sẽ giữ các giá trị riêng lẻ của chúng.",
                "noMulti": "Đầu vào này có thể được chỉnh sửa riêng lẻ, nhưng không phải là một phần của nhóm. Hoặc chỉnh sửa các mục riêng lẻ hoặc chuyển sang chế độ chỉnh sửa nhóm bằng cách nhấp vào hộp kiểm bên trái.",
                "restore": "Hoàn tác các thay đổi",
                "title": "Nhiều giá trị"
            },
            "remove": {
                "button": "Xóa",
                "title": "Xóa",
                "submit": "Xóa",
                "confirm": {
                    "_": "Bạn có chắc chắn muốn xóa %d dòng?",
                    "1": "Bạn có chắc chắn muốn xóa 1 dòng?"
                }
            }
        }
    },

    // Hàm để cấu hình DataTable với ngôn ngữ tiếng Việt
    configure: function(options) {
        var defaultOptions = {
            language: this.language,
            responsive: true,
            autoWidth: false,
            processing: true,
            dom: 'Bfrtip',
            buttons: [
                {
                    extend: 'copy',
                    text: 'Sao chép',
                    className: 'btn btn-sm btn-secondary'
                },
                {
                    extend: 'excel',
                    text: 'Xuất Excel',
                    className: 'btn btn-sm btn-success'
                },
                {
                    extend: 'pdf',
                    text: 'Xuất PDF',
                    className: 'btn btn-sm btn-danger'
                },
                {
                    extend: 'print',
                    text: 'In',
                    className: 'btn btn-sm btn-info'
                }
            ],
            pageLength: 10,
            lengthMenu: [[10, 25, 50, 100, -1], [10, 25, 50, 100, "Tất cả"]]
        };

        // Merge với options được truyền vào
        return $.extend(true, {}, defaultOptions, options);
    },

    // Hàm để khởi tạo DataTable với cấu hình tiếng Việt
    init: function(selector, options) {
        var config = this.configure(options);
        return $(selector).DataTable(config);
    },

    // Hàm để áp dụng ngôn ngữ tiếng Việt cho DataTable hiện có
    applyLanguage: function(table) {
        if (table && table.language) {
            table.language = this.language;
            if (table.draw) {
                table.draw();
            }
        }
    }
};

// Tự động áp dụng ngôn ngữ tiếng Việt cho tất cả DataTable khi document ready
$(document).ready(function() {
    // Đặt ngôn ngữ mặc định cho DataTables
    $.extend(true, $.fn.dataTable.defaults, {
        language: DataTablesVietnamese.language,
        responsive: true,
        autoWidth: false,
        processing: true,
        pageLength: 10,
        lengthMenu: [[10, 25, 50, 100, -1], [10, 25, 50, 100, "Tất cả"]],
        dom: '<"row"<"col-sm-12 col-md-6"l><"col-sm-12 col-md-6"f>>' +
             '<"row"<"col-sm-12"tr>>' +
             '<"row"<"col-sm-12 col-md-5"i><"col-sm-12 col-md-7"p>>'
    });

    console.log('🇻🇳 DataTables Vietnamese language configured for all tables');
});

// Export cho sử dụng global
window.DTVN = DataTablesVietnamese;
